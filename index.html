<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <!-- ============================================= -->
    <!-- ================ META & TITLE =============== -->
    <!-- ============================================= -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly KPI Report</title>

    <!-- ============================================= -->
    <!-- =================== STYLES ================== -->
    <!-- ============================================= -->
    <style>
        /* ============================================= */
        /* ================ VERSION 1.0.0 ================ */
        /* ============================================= */
        /*
            CHANGELOG (MAE OMA-II / UIXA-FE):
            03.08.2025 CET 10:29 - VER 1.0.0 (Initial Release):
            - Initial creation of the KPI report structure.
            - Implementation of core layout, theming (light/dark), and responsive design.
            - Added interactive features: search, section navigation, and actions (PDF/Email).
            - Established baseline KPI sections and data table structure.
        */
        /* ============================================= */

        /* ============================================= */
        /* ============= VARIABLES & THEMES ============ */
        /* ============================================= */
        :root {
            --color-bg: #F9FAFB; --color-surface: #FFFFFF; --color-primary: #3B82F6; --color-primary-a: rgba(59, 130, 246, 0.15); --color-button-text: #FFFFFF; --color-text-primary: #111827; --color-text-secondary: #4B5563; --color-border: #E5E7EB; --accent-main: #F59E0B;
            --danger-color: #EF4444; --danger-bg: rgba(239, 68, 68, 0.1); --color-surface-hover: rgba(59, 130, 246, 0.1);
            --trend-up: #16A34A; --trend-down: #DC2626; --trend-neutral: #6B7280;
        }
        [data-theme="dark"] {
            --color-bg: #111827; --color-surface: #1F2937; --color-primary: #3B82F6; --color-primary-a: rgba(34, 211, 238, 0.15); --color-button-text: #FFFFFF; --color-text-primary: #E9FAFA; --color-text-secondary: #B0BEC5; --color-border: #374151; --accent-main: #FBBF24;
            --danger-color: #F87171; --danger-bg: rgba(248, 113, 113, 0.1); --color-surface-hover: #1E2840;
            --trend-up: #4ADE80; --trend-down: #F87171; --trend-neutral: #9CA3AF;
        }
        
        /* ============================================= */
        /* ============ BASE & GLOBAL STYLES =========== */
        /* ============================================= */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: var(--color-bg); color: var(--color-text-primary); font-size: 14px; line-height: 1.6; transition: background-color 0.3s, color 0.3s; }
        .container { width: 96%; max-width: 1400px; margin: 0 auto; padding: 0 20px; }
        h1, h2, h3, h4 { font-weight: 600; line-height: 1.4; color: var(--color-text-primary); }
        h1 { font-size: 2em; } h2 { font-size: 1.5em; } h3 { font-size: 1.3em; } h4 { font-size: 1.1em; }
        p { color: var(--color-text-secondary); margin-bottom: 1rem; }
        
        /* ============================================= */
        /* ============= STANDARD COMPONENTS =========== */
        /* ============================================= */
        /* HEADER STYLES */
        #controls-section { position: sticky; top: 0; z-index: 20; background: var(--color-bg); padding: 12px 0; border-bottom: 1px solid var(--color-border); }
        .controls-panel { display: flex; gap: 0.75em; align-items: center; }
        #header-title { font-size: 1.25em; font-weight: 600; color: var(--accent-main); margin-right: auto; padding-right: 1em; white-space: nowrap; }
        .control-btn { position: relative; background-color: var(--color-surface); border: 1px solid var(--color-border); padding: 0; border-radius: 8px; color: var(--color-text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; height: 44px; width: 44px; flex-shrink: 0; transition: all 0.2s ease; }
        .control-btn:hover { border-color: var(--color-primary); color: var(--color-primary); }
        .control-btn svg { width: 24px; height: 24px; stroke-width: 1.5; }
        #search-toggle-btn { display: none; }
        #searchInput { flex-grow: 1; min-width: 150px; padding: 12px 15px; border-radius: 8px; font-size: 1em; background-color: var(--color-bg); color: var(--color-text-primary); border: 1px solid var(--color-border); height: 44px; transition: all 0.2s ease; }
        #searchInput:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px var(--color-primary-a); }

        /* FOOTER STYLES */
        footer { text-align: center; margin-top: 1em; padding: 1em 0; color: var(--color-text-secondary); font-size: 0.75em; }
        footer p { margin: 0.25rem 0; }
        footer .copyright { color: var(--color-primary); font-weight: bold; }

        /* ============================================= */
        /* ============ PAGE-LEVEL ELEMENTS ============ */
        /* ============================================= */
        main .container { padding-top: 20px; padding-bottom: 20px; }
        .dropdown-wrapper { position: relative; }
        .dropdown-menu { display: none; position: absolute; top: 110%; right: 0; background-color: var(--color-surface); border: 1px solid var(--color-border); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 8px; z-index: 100; min-width: 220px; }
        .dropdown-menu.is-open { display: block; }
        .dropdown-menu a { display: block; padding: 10px 15px; text-decoration: none; color: var(--color-text-primary); border-radius: 4px; }
        .dropdown-menu a:hover { background-color: var(--color-surface-hover); }
        #actions-dropdown .action-item { padding: 10px; }
        #actions-dropdown .email-input { width: 100%; box-sizing: border-box; padding: 8px 12px; border-radius: 6px; border: 1px solid var(--color-border); background-color: var(--color-bg); color: var(--color-text-primary); }
        #actions-dropdown .btn-action { display: flex; align-items: center; justify-content: center; gap: 0.5em; width: 100%; background-color: var(--color-primary); color: var(--color-button-text); padding: 10px; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; text-align: center; }
        #actions-dropdown .btn-action:hover { opacity: 0.9; }
        #actions-dropdown .btn-action svg { width: 20px; height: 20px; }
        #scrollToTopBtn { position: fixed; bottom: 20px; right: 20px; z-index: 1000; opacity: 0; visibility: hidden; transform: translateY(20px); transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease; color: var(--accent-main); border-color: var(--accent-main); }
        #scrollToTopBtn.is-visible { opacity: 1; visibility: visible; transform: translateY(0); }
        #scrollToTopBtn:hover { color: var(--color-primary); border-color: var(--color-primary); }
        
        /* ============================================= */
        /* ================ CARD STYLES ================ */
        /* ============================================= */
        .card { background-color: var(--color-surface); border-radius: 12px; padding: 40px; margin-bottom: 25px; border: 1px solid var(--color-border); box-shadow: 0 4px 12px rgba(0,0,0,0.05); transition: all 0.3s; }
        .card.is-hidden, .kpi-block.is-hidden { display: none; }
        .card-header { font-size: 1.4em; font-weight: 600; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--color-border); display: flex; align-items: center; gap: 0.75em; color: var(--color-primary); }
        .card-header .icon-char { font-size: 1.2em; color: var(--color-primary); flex-shrink: 0; transform: translateY(2px); }
        .grid-kpi { display: grid; grid-template-columns: 1fr; gap: 20px; margin-top: 20px; }
        @media (min-width: 992px) { .grid-kpi { grid-template-columns: 1fr 1fr; } }
        
        /* ============================================= */
        /* ============== KPI COMPONENTS =============== */
        /* ============================================= */
        .kpi-block { background-color: var(--color-surface); border-radius: 12px; padding: 24px; border: 1px solid var(--color-border); display: flex; flex-direction: column; }
        .data-table { width: 100%; border-collapse: collapse; }
        .data-table-container { margin-top: 20px; }
        .data-table th, .data-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--color-border); }
        .data-table thead th { background-color: var(--color-bg); color: var(--color-primary); letter-spacing: 0.05em; font-size: 1.1em; }
        .data-table th.th-align-right { text-align: right; }
        .data-table tbody tr:hover { background-color: var(--color-surface-hover); }
        .data-table tbody td { height: 52px; vertical-align: middle; }
        .data-table .trend-value { display: inline-flex; align-items: center; gap: 0.4em; }
        .data-table .trend-up { color: var(--trend-up); font-weight: 700; }
        .data-table .trend-down { color: var(--trend-down); font-weight: 700; }
        .data-table .trend-neutral { color: var(--trend-neutral); }
        .data-table .total-row { font-weight: 700; background-color: var(--color-bg); }
        .data-table .total-row td { color: var(--color-text-primary); border-top: 2px solid var(--color-border); }
        #key-financials .total-row td { color: var(--accent-main); font-weight: 600; }
        .data-table .value-cell { text-align: right; font-family: 'SF Mono', 'Fira Code', 'Roboto Mono', monospace; }
        .brand-icon { display: inline-block; width: 1.5em; text-align: center; margin-right: 8px; vertical-align: middle; color: var(--accent-main); font-size: 1.2em; }
        .formula-box { font-family: 'SF Mono', 'Fira Code', 'Roboto Mono', monospace; padding: 6px 10px; background-color: var(--color-bg); border-radius: 6px; border: 1px solid var(--color-border); color: var(--accent-main); margin-top: auto; font-size: 0.9em; }
        
        /* ============================================= */
        /* ================ MEDIA QUERIES ============== */
        /* ============================================= */
        @media (max-width: 768px) {
            .controls-panel { flex-wrap: nowrap; position: relative; }
            #header-title { display: none; }
            #search-toggle-btn { display: flex; }
            #searchInput { display: block; position: absolute; top: calc(100% + 10px); left: 0; right: 0; width: 100%; z-index: 10; opacity: 0; visibility: hidden; transform: translateY(-10px); transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease; }
            #controls-section.is-search-open #searchInput { opacity: 1; visibility: visible; transform: translateY(0); }
            .dropdown-wrapper { position: static; }
            .dropdown-menu { width: calc(100% - 40px); left: 20px; right: 20px; }
            
            .table-responsive-cards .data-table, 
            .table-responsive-cards .data-table thead, 
            .table-responsive-cards .data-table tbody, 
            .table-responsive-cards .data-table th, 
            .table-responsive-cards .data-table td, 
            .table-responsive-cards .data-table tr { display: block; }
            .table-responsive-cards .data-table thead { display: none; }
            .table-responsive-cards .data-table tr { border: 1px solid var(--color-border); margin-bottom: 1em; border-radius: 8px; padding: 1em; }
            .table-responsive-cards .data-table td { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--color-border); padding: .8em 0; text-align: right; height: auto; }
            .table-responsive-cards .data-table td:last-child { border-bottom: none; }
            .table-responsive-cards .data-table td:first-child { font-weight: 600; color: var(--color-text-primary); }
            .table-responsive-cards .data-table td::before { content: attr(data-label); font-weight: 500; text-align: left; color: var(--color-text-secondary); padding-right: 1em; }
            .table-responsive-cards .data-table td:first-child::before { display: none; }
            .card { padding: 20px; }
            .kpi-block { padding: 16px; }
        }
        @media print {
            body { font-size: 10pt; color: #000; }
            #header-title { display: block !important; }
            .container { width: 100%; max-width: 100%; padding: 0; }
            #controls-section, #scrollToTopBtn, footer { display: none; }
            .card { padding: 20px; margin-bottom: 15px; box-shadow: none; border: 1px solid #ddd; background: #fff !important; }
            .kpi-block, .data-table-container { page-break-inside: avoid; }
            .kpi-block { padding: 16px; }
            .data-table td, .data-table th { padding: 8px; }

            .table-responsive-cards .data-table, 
            .table-responsive-cards .data-table tbody, 
            .table-responsive-cards .data-table tr, 
            .table-responsive-cards .data-table td {
                display: table-cell;
            }
            .table-responsive-cards .data-table tr { display: table-row; }
            .table-responsive-cards .data-table thead { display: table-header-group; }
            .table-responsive-cards .data-table td::before { content: none !important; }
        }
    </style>
</head>
<body>
    <!-- ============================================= -->
    <!-- ============= HEADER CONTROLS =============== -->
    <!-- ============================================= -->
    <header id="controls-section">
        <div class="container">
            <div class="controls-panel">
                <h1 id="header-title">KPI Dashboard</h1>
                <button id="search-toggle-btn" class="control-btn" aria-label="Search Report"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" /></svg></button>
                <input type="search" id="searchInput" placeholder="Search report...">
                <button id="theme-switcher" class="control-btn" title="Switch Theme" aria-label="Switch Theme"></button>
                <div class="dropdown-wrapper">
                    <button id="section-selector-btn" class="control-btn" title="Go to section" aria-haspopup="true" aria-expanded="false" aria-label="Go to section"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg></button>
                    <div id="section-selector-dropdown" class="dropdown-menu"></div>
                </div>
                <div class="dropdown-wrapper">
                    <button id="actions-btn" class="control-btn" title="Actions" aria-haspopup="true" aria-expanded="false" aria-label="Actions"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z" /></svg></button>
                    <div id="actions-dropdown" class="dropdown-menu">
                        <div class="action-item"><button id="save-report-pdf" class="btn-action"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.03 1.125 0 1.131.094 1.976 1.057 1.976 2.192V7.5M12 14.25m-2.625 0a2.625 2.625 0 005.25 0m-5.25 0a2.625 2.625 0 015.25 0m-5.25 0v.007c0 .012.007.025.017.033a.03.03 0 00.016.007h5.186a.03.03 0 00.016-.007.034.034 0 00.017-.033v-.007c0-.012-.007-.025-.017-.033a.03.03 0 00-.016-.007H9.392a.03.03 0 00-.016.007.034.034 0 00-.017.033z" /><path stroke-linecap="round" stroke-linejoin="round" d="M3 19.5v-15A2.25 2.25 0 015.25 2.25h13.5A2.25 2.25 0 0121 4.5v15a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 19.5z" /></svg>Save as PDF</button></div>
                        <div class="action-item"><input type="email" id="recipient-email" class="email-input" placeholder="Recipient's Email"></div>
                        <div class="action-item"><button id="send-report-email" class="btn-action">@ Compose Email</button></div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ============================================= -->
    <!-- ================ MAIN CONTENT =============== -->
    <!-- ============================================= -->
    <main>
        <div class="container">

            <!-- SECTION: KEY FINANCIALS -->
            <section id="key-financials" class="card" data-section-name="Key Financials">
                <h2 class="card-header"><span class="icon-char">📊</span>Key Financial Indicators</h2>
                <div class="grid-kpi">
                    <!-- KPI Block: Summary Table -->
                    <div class="kpi-block">
                        <h4>KPI (Summary Table)</h4>
                        <p>Обзор ключевых финансовых и операционных показателей по всем брендам за отчетный период. Позволяет быстро оценить общую производительность.</p>
                        <div class="data-table-container table-responsive-cards">
                            <table class="data-table">
                                <thead><tr><th>Metric</th><th class="th-align-right">GS</th><th class="th-align-right">KS</th><th class="th-align-right">GC</th><th class="th-align-right">SF</th><th class="th-align-right">GB</th><th class="th-align-right">SUM / AVG</th></tr></thead>
                                <tbody>
                                    <tr><td data-label="Metric"><strong>FTD</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                    <tr><td data-label="Metric"><strong>R2D, %</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                    <tr><td data-label="Metric"><strong>MAU</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                    <tr><td data-label="Metric"><strong>Total DEP, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                    <tr><td data-label="Metric"><strong>GGR, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                    <tr><td data-label="Metric"><strong>NGR, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                    <tr><td data-label="Metric"><strong>VIP NGR, %</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                    <tr class="total-row"><td data-label="Metric"><strong>ARPD, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- KPI Block: Costs Table -->
                    <div class="kpi-block">
                        <h4>Operator Costs (Part)</h4>
                        <p>Детализация частичных операционных расходов, которые несет оператор. Необходимо для расчета чистой прибыли (P&L).</p>
                        <div class="data-table-container table-responsive-cards">
                            <table class="data-table">
                                <thead><tr><th>Fee/Cost</th><th class="th-align-right">GS</th><th class="th-align-right">KS</th><th class="th-align-right">GC</th><th class="th-align-right">SF</th><th class="th-align-right">GB</th><th class="th-align-right">SUM / AVG</th></tr></thead>
                                <tbody>
                                   
                                    <tr><td data-label="Metric"><strong>CAC (Affiliates), €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                   
                                    <tr><td data-label="Metric"><strong>Marketing Spend, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>

                                    <tr><td data-label="Metric"><strong>Bonuses, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>

                                    <tr><td data-label="Metric"><strong>Platform, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                   
                                    <tr><td data-label="Metric"><strong>Game Provider, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                   
                                    <tr><td data-label="Metric"><strong>Payment Provider, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                     
                                    <tr><td data-label="Metric"><strong>Other WL Costs, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>                                  
                                                                       
                                    <tr class="total-row"><td data-label="Metric"><strong>SUM, €</strong></td><td data-label="GS" class="value-cell">---</td><td data-label="KS" class="value-cell">---</td><td data-label="GC" class="value-cell">---</td><td data-label="SF" class="value-cell">---</td><td data-label="GB" class="value-cell">---</td><td data-label="SUM / AVG" class="value-cell"><strong>---</strong></td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
            <!-- /SECTION: KEY FINANCIALS -->
            
            <!-- SECTION: White Label P&L -->
            <section id="pnl" class="card" data-section-name="P&L">
                <h2 class="card-header"><span class="icon-char">📊</span>White Label P&L</h2>
                <div class="grid-kpi">
                    
                    <div class="kpi-block"><h4>Operator Profit, € (WL_NGR)</h4><p>Чистая прибыль WL-оператора после всех выплат. Это итоговый финансовый результат, демонстрирующий рентабельность.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-up"><span class="trend-value">▲ +5.2%</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-down"><span class="trend-value">▼ -3.1%</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">GGR - WL Costs</div></div>
                    
                    <div class="kpi-block"><h4>Operator Profit to Deposits, %</h4><p>Отражает долю чистой игровой прибыли от всех депозитов. Показывает реальную доходность с вложенных игроками средств.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">(WL_NGR / DEP_S) * 100%</div></div>
                     
                     <div class="kpi-block"><h4>Platform Fee, €</h4><p>Плата за использование программной платформы, обычно рассчитывается как процент от GGR или NGR, либо как фиксированная сумма.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-up"><span class="trend-value">▲ +5.2%</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-down"><span class="trend-value">▼ -3.1%</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">% of GGR/NGR or Fixed Fee</div></div>
                    
                    <div class="kpi-block"><h4>Game Provider Fee, €</h4><p>Отчисления поставщикам игрового контента, как правило, в виде процента от GGR, сгенерированного их играми.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">% of GGR from Provider's Games</div></div>
                    
                    <div class="kpi-block"><h4>Payment Provider Fee, €</h4><p>Комиссии платежных систем за обработку всех транзакций (депозитов и выводов).</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-up"><span class="trend-value">▲ +5.2%</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-down"><span class="trend-value">▼ -3.1%</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">% of Transaction Volume or Fixed Fee</div></div>
                    
                    <div class="kpi-block"><h4>Bonus Costs, €</h4><p>Расходы на выданные игрокам бонусы, которые напрямую влияют на расчет NGR и общую прибыльность.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Sum of All Bonus Costs</div></div>

                </div>
            </section>
            <!-- /SECTION: P&L -->

            <!-- SECTION: FINANCIAL OUTCOMES -->
            <section id="financial-outcomes" class="card" data-section-name="Financials">
                <h2 class="card-header"><span class="icon-char">💰</span>Financial Indicators</h2>
                <div class="grid-kpi">
                    <div class="kpi-block"><h4>Total Deposits Sum (DEP_S)</h4><p>Общая сумма всех средств, внесенных игроками на свои счета. Фундаментальный показатель, отражающий масштаб бизнеса.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Sum of All Deposits</div></div>
                    <div class="kpi-block"><h4>Gross Gaming Revenue, € (GGR)</h4><p>Общая сумма всех ставок игроков минус их выигрыши, до вычета бонусов и прочих расходов. Показывает валовый игровой доход.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Total Bets - Total Wins</div></div>
                    <div class="kpi-block"><h4>Net Gaming Revenue, € (NGR)</h4><p>Общая выручка от ставок после вычета выигрышей и бонусов. NGR является "очищенной" выручкой проекта.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">GGR - Bonuses - Taxes - Corrections</div></div>
                    <div class="kpi-block"><h4>Hold Rate, %</h4><p>Показывает процент удержанных депозитов. Помогает оценить, сколько денег игроки оставляют на платформе.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">(DEP_S - WD_S) / DEP_S * 100%</div></div>
                </div>
            </section>
            <!-- /SECTION: FINANCIAL OUTCOMES -->
            
            <!-- SECTION: ACQUISITION & CONVERSION -->
            <section id="acquisition-conversion" class="card" data-section-name="Acquisition">
                <h2 class="card-header"><span class="icon-char">🎯</span>Acquisition & Conversion</h2>
                <div class="grid-kpi">
                    <div class="kpi-block"><h4>REG (Registration Count)</h4><p>Общее количество новых регистраций на платформе за отчетный период. Является вершиной воронки привлечения.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Count of New User Registrations</div></div>
                    <div class="kpi-block"><h4>FTD (First Time Deposits)</h4><p>Общее количество игроков, совершивших свой первый депозит. Главный показатель эффективности привлечения.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Count of First Time Depositors</div></div>
                    <div class="kpi-block"><h4>Registration to Deposit, % (R2D)</h4><p>Процент зарегистрированных пользователей, совершивших первый депозит. Ключевой показатель эффективности воронки.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">FTD Count / Registrations Count * 100%</div></div>
                    <div class="kpi-block"><h4>FTD to STD, %</h4><p>Процент игроков, сделавших FTD, которые затем делают второй депозит (STD). Является индикатором качества трафика.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">STD Count / FTD Count * 100%</div></div>
                </div>
            </section>
            <!-- /SECTION: ACQUISITION & CONVERSION -->

            <!-- SECTION: ENGAGEMENT & ACTIVITY -->
            <section id="engagement-activity" class="card" data-section-name="Engagement">
                <h2 class="card-header"><span class="icon-char">🎉</span>Engagement & Activity</h2>
                <div class="grid-kpi">
                     <div class="kpi-block"><h4>Average Revenue Per Depositor, € (ARPD)</h4><p>Средний доход (NGR) на одного депозитящего игрока. Показывает эффективность монетизации платящей аудитории.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">NGR / Number of Depositors</div></div>
                                   
                     <div class="kpi-block"><h4>Average Deposit Amount Per Depositor, €</h4><p>Средний размер депозита на одного депозитящего игрока. Показывает платежеспособность игроков.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Total DEP_S / Total DEP_C</div></div>
                      
                     <div class="kpi-block"><h4>Average Deposit Count Per Depositor</h4><p>Среднее количество депозитов на одного депозитящего игрока. Показывает вовлеченность платящей аудитории.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Total DEP_C / Number of Depositors</div></div>

                     <div class="kpi-block"><h4>Monthly Active Users (MAU)</h4><p>Общее количество уникальных игроков с любой значимой активностью за месяц. Отражает общий размер активной аудитории.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Count of Monthly Unique Active Users</div></div>
                    

                </div>
            </section>
            <!-- /SECTION: ENGAGEMENT & ACTIVITY -->
            
            <!-- SECTION: RETENTION & LIFECYCLE -->
            <section id="retention-lifecycle" class="card" data-section-name="Retention">
                <h2 class="card-header"><span class="icon-char">📯</span>Retention & Lifecycle</h2>
                <div class="grid-kpi">
                    <div class="kpi-block">
                        <h4>Cohort Analysis of Retention Rate (after FTD), %</h4>
                        <p>Возврат игроков на платформу в ключевые дни после FTD. Критически важный показатель для оценки воронки и онбординга.</p>
                        <div class="data-table-container table-responsive-cards">
                            <table class="data-table">
                                <thead><tr><th>Brand</th><th class="th-align-right">Day 3</th><th class="th-align-right">Day 7</th><th class="th-align-right">Day 14</th><th class="th-align-right">Day 30</th></tr></thead>
                                <tbody>
                                    <tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td></tr>
                                    <tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td></tr>
                                    <tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td></tr>
                                    <tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td></tr>
                                    <tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td></tr>
                                    <tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td><td class="value-cell">---</td></tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="formula-box">(Returning Users on Day X / Total FTD Users on Day 0) * 100%</div>
                    </div>
                    <div class="kpi-block">
                        <h4>Player Lifespan (LT)</h4>
                        <p>Среднее количество дней, в течение которых игрок остается активным с момента FTD. Отражает долгосрочное удержание игроков.</p>
                        <br>
                        <table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Days</th><th class="th-align-right">Trend</th></tr></thead><tbody>
                            <tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr>
                            <tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr>
                            <tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr>
                            <tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr>
                            <tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr>
                            <tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr>
                        </tbody></table>
                        <div class="formula-box">Sum of All Lifespans / Number of Players</div>
                    </div>
                    <div class="kpi-block">
                        <h4>Reactivation Rate (30+ Days)</h4>
                        <p>Количество "спящих" депозитящих игроков, которые вернулись и совершили повторный депозит. Показывает эффективность реанимации.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Count of Reactivated Depositors</div>
                    </div>
                    <div class="kpi-block">
                        <h4>Churn Rate, %</h4>
                        <p>Отражает процент пользователей, прекративших активность в прошлом календарном месяце, и используется для оценки оттока.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">(Depositors who left / Total depositors at start of month) * 100%</div>
                    </div>
                </div>
            </section>
            <!-- /SECTION: RETENTION & LIFECYCLE -->
            
            <!-- SECTION: VIP ANALYTICS -->
            <section id="vip-analytics" class="card" data-section-name="VIP Analytics">
                <h2 class="card-header"><span class="icon-char">💎</span>VIP Analytics</h2>
                <div class="grid-kpi">
                    <div class="kpi-block"><h4>Monthly Active VIPs</h4><p>Количество активных VIP-игроков за месяц. Индикатор здоровья самого ценного сегмента аудитории.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>SUM</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">Count of Monthly Unique Active VIPs</div></div>
                    <div class="kpi-block"><h4>VIP Revenue Share, %</h4><p>Процент от общего NGR, сгенерированный VIP-сегментом. Подчеркивает важность самых ценных игроков.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">(Revenue from VIPs / Total Revenue) * 100%</div></div>
                    <div class="kpi-block"><h4>VIP to Standard Player Ratio, %</h4><p>Соотношение активных VIP-игроков к общему числу активных игроков. Показывает концентрацию ценного сегмента.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">(Active VIPs / Total Active Users) * 100%</div></div>
                    <div class="kpi-block"><h4>VIP Churn Rate, %</h4><p>Процент VIP-игроков, прекративших активность или потерявших статус. Высокий показатель требует немедленного анализа.</p><table class="data-table"><thead><tr><th>Brand</th><th class="th-align-right">Value</th><th class="th-align-right">Trend</th></tr></thead><tbody><tr><td><span class="brand-icon">🌟</span>GS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🧀</span>KS</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">👑</span>GC</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🏖</span>SF</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr><td><span class="brand-icon">🎪</span>GB</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr><tr class="total-row"><td>AVG</td><td class="value-cell">---</td><td class="value-cell trend-neutral"><span class="trend-value">– ---</span></td></tr></tbody></table><div class="formula-box">(Churned VIPs / Total VIPs at GSt) * 100%</div>
                    </div>
                </div>
            </section>
            <!-- /SECTION: VIP ANALYTICS -->

        </div>
    </main>

    <!-- ============================================= -->
    <!-- =================== FOOTER ================== -->
    <!-- ============================================= -->
    <footer>
        <p>Generated by MAE OMA-II / DB-MKPI</p>
        <p class="copyright">© 2025 McBile AI-Engine</p>
    </footer>

    <!-- ============================================= -->
    <!-- ============== UTILITY ELEMENTS ============= -->
    <!-- ============================================= -->
    <button id="scrollToTopBtn" class="control-btn" title="Scroll to Top" aria-label="Scroll to Top"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7" /></svg></button>
    
    <!-- ============================================= -->
    <!-- =================== SCRIPT ================== -->
    <!-- ============================================= -->
    <script>
    (() => {
        // --- CACHE DOM ELEMENTS & ICONS ---
        const D = document;
        const DOM = {
            htmlElement: D.documentElement,
            controlsSection: D.getElementById('controls-section'),
            themeSwitcher: D.getElementById('theme-switcher'),
            searchToggleBtn: D.getElementById('search-toggle-btn'),
            searchInput: D.getElementById('searchInput'),
            sectionSelectorBtn: D.getElementById('section-selector-btn'),
            sectionSelectorDropdown: D.getElementById('section-selector-dropdown'),
            actionsBtn: D.getElementById('actions-btn'),
            actionsDropdown: D.getElementById('actions-dropdown'),
            savePdfBtn: D.getElementById('save-report-pdf'),
            sendEmailBtn: D.getElementById('send-report-email'),
            emailInput: D.getElementById('recipient-email'),
            scrollToTopBtn: D.getElementById('scrollToTopBtn'),
            allSearchableCards: D.querySelectorAll('section.card, .kpi-block'),
            mainContent: D.querySelector('main'),
        };
        const ICONS = {
            sun: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" /></svg>',
            moon: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" /></svg>'
        };

        // --- MODULE: THEME ---
        const applyTheme = (theme) => {
            DOM.htmlElement.setAttribute('data-theme', theme);
            localStorage.setItem('kpiReportTheme', theme);
            if (DOM.themeSwitcher) {
                DOM.themeSwitcher.innerHTML = theme === 'dark' ? ICONS.sun : ICONS.moon;
            }
        };
        const initTheme = () => {
            DOM.themeSwitcher?.addEventListener('click', () => {
                const newTheme = DOM.htmlElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                applyTheme(newTheme);
            });
            applyTheme(localStorage.getItem('kpiReportTheme') || 'dark');
        };

        // --- MODULE: DROPDOWNS ---
        const toggleDropdown = (btn, menu) => {
            const isOpen = menu.classList.toggle('is-open');
            btn.setAttribute('aria-expanded', isOpen);
        };
        const initDropdowns = () => {
            const dropdowns = [
                { btn: DOM.sectionSelectorBtn, menu: DOM.sectionSelectorDropdown },
                { btn: DOM.actionsBtn, menu: DOM.actionsDropdown }
            ];
            dropdowns.forEach(({ btn, menu }) => {
                if (!btn || !menu) return;
                btn.addEventListener('click', (e) => { e.stopPropagation(); toggleDropdown(btn, menu); });
                menu.addEventListener('click', (e) => { if (e.target.tagName === 'A') { toggleDropdown(btn, menu); } });
            });
            D.addEventListener('click', (e) => {
                dropdowns.forEach(({ btn, menu }) => {
                    if (menu && !menu.contains(e.target) && !btn?.contains(e.target)) {
                        menu.classList.remove('is-open');
                        btn?.setAttribute('aria-expanded', 'false');
                    }
                });
            });
        };

        // --- MODULE: DYNAMIC CONTENT & UX ---
        const populateSectionSelector = () => {
            if (!DOM.sectionSelectorDropdown || !DOM.mainContent) return;
            const sections = DOM.mainContent.querySelectorAll('section[id][data-section-name]');
            const fragment = D.createDocumentFragment();
            sections.forEach(section => {
                const link = D.createElement('a');
                link.href = `#${section.id}`;
                link.textContent = section.getAttribute('data-section-name');
                fragment.appendChild(link);
            });
            DOM.sectionSelectorDropdown.innerHTML = '';
            DOM.sectionSelectorDropdown.appendChild(fragment);
        };
        const prepareResponsiveTables = () => {
            D.querySelectorAll('.table-responsive-cards .data-table').forEach(table => {
                const headers = Array.from(table.querySelectorAll('thead th, .total-row td:first-child')).map(th => th.textContent);
                table.querySelectorAll('tbody tr:not(.total-row)').forEach(row => {
                    row.querySelectorAll('td').forEach((cell, index) => {
                         cell.setAttribute('data-label', headers[index] || '');
                    });
                });
            });
        };
        const initScrollToTop = () => {
            if (!DOM.scrollToTopBtn) return;
            window.addEventListener('scroll', () => {
                DOM.scrollToTopBtn.classList.toggle('is-visible', window.scrollY > 300);
            });
            DOM.scrollToTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        };

        // --- MODULE: SEARCH ---
        const handleSearch = () => {
            const query = DOM.searchInput.value.toLowerCase().trim();
            DOM.allSearchableCards.forEach(card => {
                const isParentSection = card.matches('section.card');
                const cardText = card.querySelector('h2, h4')?.innerText.toLowerCase() || '';
                let hasVisibleChild = false;
                
                if (isParentSection) {
                    const childCards = card.querySelectorAll('.kpi-block');
                    childCards.forEach(child => {
                        const childText = child.innerText.toLowerCase();
                        const childMatches = childText.includes(query);
                        child.classList.toggle('is-hidden', !childMatches);
                        if (childMatches) hasVisibleChild = true;
                    });
                    const sectionMatches = cardText.includes(query);
                    card.classList.toggle('is-hidden', query && !sectionMatches && !hasVisibleChild);
                }
            });
        };
        const initSearch = () => {
            DOM.searchToggleBtn?.addEventListener('click', () => DOM.controlsSection.classList.toggle('is-search-open'));
            DOM.searchInput?.addEventListener('input', handleSearch);
        };

        // --- MODULE: ACTIONS ---
        const initActions = () => {
            DOM.savePdfBtn?.addEventListener('click', () => window.print());
            DOM.sendEmailBtn?.addEventListener('click', () => {
                const recipient = DOM.emailInput.value;
                if (!recipient) { alert('Please enter recipient email.'); return; }
                const subject = encodeURIComponent(`KPI Report`);
                const bodyText = `Hello,\n\nPlease find the Key Performance Indicators report attached.\n\nBest regards.`;
                window.location.href = `mailto:${recipient}?subject=${subject}&body=${encodeURIComponent(bodyText)}`;
            });
        };

        // --- APP BOOTSTRAP ---
        function bootstrap() {
            initTheme();
            initDropdowns();
            initSearch();
            initActions();
            initScrollToTop();
            populateSectionSelector();
            prepareResponsiveTables();
        }

        bootstrap();
    })();
    </script>
</body>
</html>
